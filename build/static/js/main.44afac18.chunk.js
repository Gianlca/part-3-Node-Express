(this["webpackJsonppart2-notes"]=this["webpackJsonppart2-notes"]||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(18),a=n.n(c),s=n(3),o=n.n(s),i=n(19),u=n(5),d=n(4),j=n(6),l=n.n(j),b=n(1),p="/api/persons",f={createPerson:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post(p,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.delete("".concat(p,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function h(e){var t=e.handleFilter;return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{onChange:t})]})}var O=function(e){var t=e.message,n=e.type;return null==t?null:Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:n,children:t})})},x=function(e){var t=e.addPerson,n=e.handleInputName,c=e.number,a=e.name,s=e.handleInputNumber;return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:a,onChange:n}),"number: ",Object(r.jsx)("input",{value:c,onChange:s})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var t=e.personsToShow,n=e.deletePerson;return Object(r.jsx)("div",{children:t.map((function(e){return Object(r.jsxs)("div",{children:[e.name," - ",e.number,Object(r.jsx)("button",{onClick:function(){return n(e)},children:"delete"})]},e.name)}))})};function v(){var e=Object(b.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(b.useState)(""),s=Object(d.a)(a,2),j=s[0],p=s[1],v=Object(b.useState)(""),w=Object(d.a)(v,2),y=w[0],k=w[1],S=Object(b.useState)(""),g=Object(d.a)(S,2),T=g[0],P=g[1],C=Object(b.useState)(null),N=Object(d.a)(C,2),I=N[0],L=N[1],D=Object(b.useState)(null),E=Object(d.a)(D,2),H=E[0],J=E[1],Z=function(){var e=Object(u.a)(o.a.mark((function e(t){var r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r={name:j,number:y},a=Object(i.a)(n),e.prev=3,a.s();case 5:if((s=a.n()).done){e.next=12;break}if(s.value.name!==j){e.next=10;break}return alert("".concat(j," is already added to phonebook")),e.abrupt("return");case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:return e.next=22,f.createPerson(r).then((function(e){c(n.concat(e.data)),L("Added ".concat(e.data.name)),p(""),k(""),setTimeout((function(){L(null)}),5e3)}));case 22:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm('"Do you want to delete '.concat(t.name,'?"'))){e.next=5;break}return e.next=3,f.deletePerson(t.id).then((function(e){c(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){J("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){J(null)}),5e3)}));case 3:e.next=6;break;case 5:console.log("don't delete this person");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(b.useEffect)((function(){l.a.get("/api/persons").then((function(e){return c(e.data)}))}),[]);var B=T?n.filter((function(e){return e.name.toLocaleLowerCase().includes(T.toLocaleLowerCase())})):n;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(O,{message:I,type:"success"}),Object(r.jsx)(O,{message:H,type:"error"}),Object(r.jsx)(h,{handleFilter:function(e){P(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("h3",{children:"Add a new person"}),Object(r.jsx)(x,{addPerson:Z,handleInputName:function(e){p(e.target.value)},number:y,name:j,handleInputNumber:function(e){k(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)("div",{children:Object(r.jsx)(m,{personsToShow:B,deletePerson:A})})]})}var w=function(){return Object(r.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(r.jsx)("br",{}),Object(r.jsx)("em",{children:"Note app, Department of Computer Science, University of Helsinki 2021"})]})},y=function(e){e.notex;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(v,{})}),Object(r.jsx)("div",{children:Object(r.jsx)(w,{})})]})};n(45);a.a.render(Object(r.jsx)(y,{notex:[{id:1,content:"HTML is easy",date:"2019-05-30T17:30:31.098Z",important:!0},{id:2,content:"Browser can execute only JavaScript",date:"2019-05-30T18:39:34.091Z",important:!1},{id:3,content:"GET and POST are the most important methods of HTTP protocol",date:"2019-05-30T19:20:14.298Z",important:!0}]}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.44afac18.chunk.js.map